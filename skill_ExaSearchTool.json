{"title":"ExaSearchTool","content":"\"\"\"\nExaSearchTool 這段程式碼是一個使用了名為Exa的Python套件，並利用langchain套件中的工具，來進行網頁搜尋、查找相似網頁以及獲取網頁內容的類別定義。\n讓我們逐行解釋：\nimport os: 導入了Python的os模組，用於與作業系統進行互動。\nfrom exa_py import Exa: 從exa_py模組中導入了Exa類別，用於執行網頁相關操作。\nfrom langchain.agents import tool: 從langchain.agents模組中導入了tool裝飾器，用於定義工具函數。\nclass ExaSearchTool:: 定義了一個名為ExaSearchTool的類別，用於包裝與Exa和langchain相關操作的方法。\n@tool: 這是一個裝飾器，標記了以下定義的方法是一個工具函數，可以被langchain套件使用。\ndef search(query: str):: 定義了一個名為search的方法，該方法接受一個字串型態的查詢參數，並返回相關的網頁搜索結果。\ndef find_similar(url: str):: 定義了一個名為find_similar的方法，該方法接受一個字串型態的URL參數，並返回與該URL相似的其他網頁結果。\ndef get_contents(ids: str):: 定義了一個名為get_contents的方法，該方法接受一個字串型態的ID參數，並返回該ID對應的網頁內容。這裡使用了eval函數來將字串型態的IDs轉換為列表型態。然後該方法會輸出網頁的內容並返回前1000個字元，並將多個內容以換行符分隔並返回。\n\"\"\"\nimport os\nfrom exa_py import Exa\nfrom langchain.agents import tool\n\nclass ExaSearchTool:\n\t@tool\n\tdef search(query: str):\n\t\t\"\"\"Search for a webpage based on the query.\"\"\"\n\t\treturn ExaSearchTool._exa().search(f\"{query}\", use_autoprompt=True, num_results=3)\n\n\t@tool\n\tdef find_similar(url: str):\n\t\t\"\"\"Search for webpages similar to a given URL.\n\t\tThe url passed in should be a URL returned from `search`.\n\t\t\"\"\"\n\t\treturn ExaSearchTool._exa().find_similar(url, num_results=3)\n\n\t@tool\n\tdef get_contents(ids: str):\n\t\t\"\"\"Get the contents of a webpage.\n\t\tThe ids must be passed in as a list, a list of ids returned from `search`.\n\t\t\"\"\"\n\t\tids = eval(ids)\n\t\tcontents = str(ExaSearchTool._exa().get_contents(ids))\n\t\tprint(contents)\n\t\tcontents = contents.split(\"URL:\")\n\t\tcontents = [content[:1000] for content in contents]\n\t\treturn \"\\n\\n\".join(contents)\n\n\tdef tools():\n\t\treturn [ExaSearchTool.search, ExaSearchTool.find_similar, ExaSearchTool.get_contents]\n\n\tdef _exa():\n\t\treturn Exa(api_key=os.environ[\"EXA_API_KEY\"])","file_name":null,"description":null,"timestamp":"2024-02-11T17:29:41.961468","user_id":"default"}